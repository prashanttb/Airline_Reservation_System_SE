<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airline Reservation System</title>
    <%- include('partials/header.ejs') %>
</head>
<body>
    <%- include('partials/nav1.ejs') %>    

    <section id="contact" style="margin-top: 5%;">
        <div class="container-lg">
            <div class="text-center">
                <h2>Search for flights here</h2>
            </div>
            <div class="row justify-content-center my-5">
                <div class="col-lg-6">
                    
                    <form action="/main" method="POST">
                        <label for="source" class="form-label">Source</label>
                        <select name="source" class="form-select" id="">
                            <option value="">Source</option>
                            <% for(var i=0;i<sources.length; i++){ %>
                                <option value="<%= sources[i] %>"><%= sources[i] %></option>
                            <% } %>
                        </select>
                        <br>
                        <label for="destination" class="from-label">Destination</label>
                        <select name="destination" id="" class="form-select">
                            <option value="">Destination</option>
                            <% for(var i=0;i<destinations.length; i++){ %>
                                <option value="<%= destinations[i] %>"><%= destinations[i] %></option>
                            <% } %>
                        </select>
                        <br>
                        <label for="date" class="form-label">Date</label>
                        <input type="date" class="form-control" name="date" id="">
                        <br>
                        <button  class="btn btn-success type="submit">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </section>



    <div class="container-lg mg-5">

        <table class="table">
            <tr>
                <th>Flight Id</th>
                <th>Source</th>
                <th>Destination</th>
                <th>Date</th>
                <th>Arrival Time</th>
                <th>Departure Time</th>
                <th>Ticket Price</th>
                <th>Book</th>
            </tr>
            <form action="/book" method="POST">
            <% for(var i=0;i<flights.length;i++ ){ %>
            <% var d = new Date().toISOString().slice(0,10) %>
            <% if(flights[i].date>=d){ %>
            <tr>
                <td><%= flights[i].flight_id %></td>
                <td><%= flights[i].source %></td>
                <td><%= flights[i].destination %></td>
                <td><%= flights[i].date %></td>
                <td><%= flights[i].arrivaltime %></td>
                <td><%= flights[i].departuretime %></td>
                <td><%= flights[i].price %></td>
                <td><button class="btn btn-info" id="<%= flights[i].flight_id %>" onclick="funct(this.id)"  value="<%= flights[i].flight_id %>" type="submit">Book</button></td>
                <script>
                    function funct(clicked_id){
                        document.getElementById(clicked_id).name = 'flightid';
                    }
                </script>
            </tr>
            <% } %>
            <% } %>
        </form>
        </table>

    </div>






<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</body>
</html>

<!-- 
<section id="contact">
    <div class="container-lg">
        <div class="text-center">
            <h2>Search for flights here</h2>
        </div>
        <div class="row justify-content-center my-5">
            <div class="col-lg-6">
                <form action="">
                    <label for="email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" placeholder="email">

                    <label for="name" class="form-label">Name:</label>
                    <input type="text" class="form-control" id="name" placeholder="name">
                </form>
            </div>
        </div>
    </div>
</section>
 -->
